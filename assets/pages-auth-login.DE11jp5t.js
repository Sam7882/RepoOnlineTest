import{d as e,u as a,s as l,r as s,c as o,j as t,k as n,a as c,b as r,w as i,e as u,f as p,g as d,h as m,t as g,i as f,l as h,F as _,m as b,n as v,p as k,q as y,v as j,x as w,y as x,o as V,z as $,A as C,B as z,C as S}from"./index-Dci2vKdT.js";import{_ as q}from"./uni-icons.jq07633Z.js";import{_ as T}from"./uni-popup.Ddwpgb5j.js";import{u as A}from"./useInitDataStore.C1f-4toP.js";import{_ as E,a as I,b as M}from"./_plugin-vue_export-helper.B_C9qUr5.js";import{_ as U}from"./uni-easyinput.BkGaB9t4.js";import{_ as N,a as B}from"./uni-forms.C6CXZLLQ.js";import{_ as O}from"./c-checkBox.RKaZWriT.js";import{_ as R}from"./icon-community-facebook.D2DSHjcD.js";const W=[{code:"zh_TW",label:"TW",flag:"/static/images/lang/icon-lang-zh_TW.png"},{code:"zh_CN",label:"CN",flag:"/static/images/lang/icon-lang-zh_CN.png"},{code:"en_US",label:"EN",flag:"/static/images/lang/icon-lang-en-US.png"},{code:"ja",label:"JA",flag:"/static/images/lang/icon-lang-ja.png"},{code:"th",label:"TH",flag:"/static/images/lang/icon-lang-th.png"},{code:"vi",label:"VI",flag:"/static/images/lang/icon-lang-vi.png"},{code:"ko",label:"KO",flag:"/static/images/lang/icon-lang-ko.png"}],D=E(e({__name:"c-langSelector",setup(e){const{locale:k}=a(),y=A(),{settings:j}=l(y),{changeLanguage:w}=y,x=s(),V=o((()=>W.find((e=>e.code===j.value.language))||W[0]));return(e,a)=>{const l=p,s=d,o=t(n("uni-icons"),q),y=f,j=t(n("uni-popup"),T);return r(),c(y,{class:"lang-selector",onClick:a[0]||(a[0]=e=>x.value.open())},{default:i((()=>[u(l,{src:V.value.flag,class:"flag"},null,8,["src"]),u(s,{class:"code"},{default:i((()=>[m(g(V.value.label),1)])),_:1}),u(o,{class:"icon-triangle","custom-prefix":"icon",type:"icon-video-play"}),u(j,{ref_key:"popupRef",ref:x,type:"bottom"},{default:i((()=>[u(y,{class:"popup-list"},{default:i((()=>[(r(!0),h(_,null,b(v(W),(e=>(r(),c(y,{key:e.code,class:"lang-item",onClick:a=>{return l=e.code,x.value.close(),w(l),void(k.value=l);var l}},{default:i((()=>[u(l,{src:e.flag,class:"flag"},null,8,["src"]),u(s,{class:"label"},{default:i((()=>[m(g(e.label),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},512)])),_:1})}}}),[["__scopeId","data-v-ea9d0cac"]]),F={set(e,a){w(e,a)},get:e=>j(e),remove(e){y(e)},clear(){k()}},H=E({__name:"login",setup(e){const{t:l}=a(),o=A(),{checkInitData:h}=o,_=s(!1),b=s(),k=s({phone:null,password:null,remember:!1}),y=x({phone:"",password:""}),j={phone:{rules:[{required:!0,errorMessage:l("auth.pleaseEnter",{title:l("auth.phone")})},{pattern:/^[0-9]{10}$/,errorMessage:l("auth.rules.phone.pattern")}]},password:{rules:[{required:!0,errorMessage:l("auth.pleaseEnter",{title:l("auth.password")})},{pattern:/^[a-zA-Z0-9]{6,20}$/,errorMessage:l("auth.rules.password.pattern")}]}},w=()=>{b.value.validate().then((()=>{console.log("✅ 驗證成功，送出資料:",k.value),S({title:"驗證成功",icon:"success"}),M()})).catch((e=>{console.log("❌ 驗證失敗:",e),S({title:l("auth.checkAright"),icon:"none"}),Object.keys(y).forEach((a=>{e.forEach((e=>{e.key===a&&(y[a]=e.errorMessage||"")}))})),console.log("🚀 ~ Object.keys ~ errors:",y)}))};return V((()=>{h(),(()=>{const e=F.get("loginRemember");e&&(_.value=e)})()})),$(_,((e,a)=>{e!==a&&F.set("loginRemember",_.value)})),(e,a)=>{const l=d,s=f,o=t(n("c-langSelector"),D),h=t(n("uni-easyinput"),U),y=t(n("uni-icons"),q),x=t(n("uni-forms-item"),B),V=t(n("c-checkBox"),O),$=z,S=t(n("uni-forms"),N),T=p;return r(),c(s,{class:"login-page"},{default:i((()=>[u(s,{class:"header"},{default:i((()=>[u(s,{class:"header-title"},{default:i((()=>[u(l,{class:"title"},{default:i((()=>[m(g(e.$t("auth.login")),1)])),_:1}),u(l,{class:"brand"},{default:i((()=>[m("Fance")])),_:1}),u(s,{class:"underline"})])),_:1}),u(o)])),_:1}),u(S,{ref_key:"form",ref:b,model:v(k),rules:j,class:"form"},{default:i((()=>[u(x,{name:"phone",required:""},{default:i((()=>[u(s,{class:"form-item"},{default:i((()=>[u(h,{modelValue:v(k).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>v(k).phone=e),class:"inputStyle",placeholder:e.$t("auth.phone"),trim:!0,clearable:!1},null,8,["modelValue","placeholder"]),u(y,{class:"form-input-icon",type:"icon-input-phone","custom-prefix":"icon",size:"24",color:"#999"})])),_:1})])),_:1}),u(x,{name:"password",required:""},{default:i((()=>[u(s,{class:"form-item"},{default:i((()=>[u(h,{modelValue:v(k).password,"onUpdate:modelValue":a[1]||(a[1]=e=>v(k).password=e),class:"inputStyle",type:"password",placeholder:e.$t("auth.password"),confirmType:e.$t("auth.login"),trim:!0,clearable:!1},null,8,["modelValue","placeholder","confirmType"]),u(y,{class:"form-input-icon",type:"icon-common-locked","custom-prefix":"icon",size:"24",color:"#999"})])),_:1})])),_:1}),u(s,{class:"form-item remember"},{default:i((()=>[u(l,{class:"remember-text"},{default:i((()=>[m(g(e.$t("auth.remember")),1)])),_:1}),u(V,{modelValue:v(_),"onUpdate:modelValue":a[2]||(a[2]=e=>C(_)?_.value=e:null)},null,8,["modelValue"])])),_:1}),u($,{type:"button",class:"login-btn",onClick:w},{default:i((()=>[m(g(e.$t("auth.login")),1)])),_:1})])),_:1},8,["model"]),u(s,{class:"social-login"},{default:i((()=>[u(T,{class:"social-icon",src:R}),u(T,{class:"social-icon",src:R}),u(T,{class:"social-icon",src:R}),u(T,{class:"social-icon",src:R})])),_:1}),u(s,{class:"register"},{default:i((()=>[u(l,null,{default:i((()=>[m(g(e.$t("auth.noAccount")),1)])),_:1}),u(l,{class:"link",onClick:a[3]||(a[3]=e=>v(I)())},{default:i((()=>[m(g(e.$t("auth.register")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-c4a209f9"]]);export{H as default};
