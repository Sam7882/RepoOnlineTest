<template>
	<view>
		<view class="header-nav-container">
			<!-- icon åœ–æ¨™ çµ•å°ä½ç½®é å·¦-->
			<view class="header-nav-left-position header-nav-icon-container" @click="handleBack">
				<uni-icons class="header-nav-icon" type="icon-common-return" custom-prefix="icon" size="20"
					color="var(--text-color-primary)"></uni-icons>
			</view>
		</view>
		<!-- åœ–ç‰‡åˆ—è¡¨ -->
		<view>
			<c-gridPhoto :data="gridPhotoData" @clickMedia="handleClickMedia" />
		</view>
		<!-- åº•éƒ¨å°Žèˆª -->
		<c-bottomNav bgColor="var(--background-color-dark)" iconColor="var(--text-color-secondary)" />
		<!-- åœ–ç‰‡å…¨èž¢å¹• -->
		<play-popImgFullScreen ref="videoPopImgFullScreen" :imgs="imageFullScreenImgs"></play-popImgFullScreen>
	</view>
</template>

<script setup lang="ts">
// TEMP: æ–‡ç« åœ–ç‰‡åˆ—è¡¨
import { router, toPlayIndex } from '@/utils/routers';
const { back } = router;
const gridPhotoData = ref([
	{
		src: '/static/images/template/img-template-01.png',
		type: 'photos',
		alt: 'åœ–ç‰‡1',
	},
	{
		src: '/static/images/template/img-template-02.png',
		type: 'single',
		alt: 'åœ–ç‰‡2',
	},
	{
		src: '/static/images/template/img-template-03.png',
		type: 'video',
		alt: 'åœ–ç‰‡3',
	},
	{
		src: '/static/images/template/img-template-04.png',
		type: 'photos',
		alt: 'åœ–ç‰‡4',
	},
	{
		src: '/static/images/template/img-template-01.png',
		type: 'video',
		alt: 'åœ–ç‰‡1',
	},
	{
		src: '/static/images/template/img-template-02.png',
		type: 'photos',
		alt: 'åœ–ç‰‡2',
	},
	{
		src: '/static/images/template/img-template-03.png',
		type: 'video',
		alt: 'åœ–ç‰‡3',
	},
	{
		src: '/static/images/template/img-template-02.png',
		type: 'video',
		alt: 'åœ–ç‰‡2',
	},
	{
		src: '/static/images/template/img-template-01.png',
		type: 'photos',
		alt: 'åœ–ç‰‡1',
	},
	{
		src: '/static/images/template/img-template-04.png',
		type: 'video',
		alt: 'åœ–ç‰‡4',
	},
]);
const videoPopImgFullScreen = ref()
const imageFullScreenImgs = ref<string[]>([])
// é»žæ“Šåœ–ç‰‡
const handleClickMedia = (item: { src: string; type: string }) => {
	// è·³è½‰ä¸¦å‚³å…¥åƒæ•¸
	console.log("ðŸš€ == é–‹å•Ÿåœ–ç‰‡å…¨èž¢å¹• == ")
	// åœ–ç‰‡å…¨èž¢å¹•
	if (item.type === 'photos') {
		imageFullScreenImgs.value = gridPhotoData.value.map(item => item.src)
		videoPopImgFullScreen.value?.open()
	} else {
		// è·³è½‰å½±éŸ³é 
		toPlayIndex()
	}
}

// æ–°å¢žè™•ç†å‡½æ•¸
const handleBack = () => {
	back();
};
</script>

<style lang="scss" scoped>
.header-nav-container {
	position: relative;
	display: flex;
	justify-content: flex-start;
	padding: 24rpx 32rpx;
	border-bottom: 1px solid var(--text-color-octonary);
	background-color: var(--background-color-dark);

	// åœ–æ¨™å®¹å™¨
	.header-nav-left-position {
		position: relative;
		transform: scaleX(-1);

		.header-nav-icon {
			color: var(--text-color-secondary) !important;
		}
	}

	// æ¨™é¡Œå®¹å™¨
	.header-nav-title-container {
		font-size: 32rpx;
		color: var(--text-color-primary);
	}

	// åœ–æ¨™å®¹å™¨
	.header-nav-right-position {
		position: absolute;
		right: 48rpx;
		top: 50%;
		transform: translateY(-50%);
		padding-top: 16rpx;
	}
}
</style>